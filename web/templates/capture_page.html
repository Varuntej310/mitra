<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Capture and Detect</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <h1>Capture and Detect</h1>

    <a href="/">Back to Home</a>
    <br><br>

    <div id="capture-container">
        <h2>Live Camera Feed for Capture</h2>
        <div id="capture-live-feed-container">
            <img id="capture-camera-feed" src="" alt="Capture Camera Feed" style="max-width: 640px; max-height: 480px; border: 1px solid #ccc;">
            <p id="capture-camera-error-message" style="color: red; display: none;">Error: Could not load camera feed.</p>
        </div>

        <button id="capture-button">Take Picture and Detect</button>

        <div id="detection-result-container" style="margin-top: 20px; display: none;">
            <h2>Detection Result</h2>
            <img id="detected-image" src="" alt="Detected Image" style="max-width: 640px; max-height: 480px; border: 1px solid #ccc;">
            <div id="detection-summary">
                <p><strong>Timestamp:</strong> <span id="capture-timestamp"></span></p>
                <p><strong>Crop Count:</strong> <span id="capture-crop-count"></span></p>
                <p><strong>Weed Count:</strong> <span id="capture-weed-count"></span></p>
            </div>
        </div>
        <p id="detection-error-message" style="color: red; display: none;">Error during detection.</p>
    </div>

    <script src="/static/js/script.js"></script>
    <script>
        // Initialize the capture page with WebSocket connection
        document.addEventListener('DOMContentLoaded', setupCapturePage);
    </script>
</body>
</html>